@inject IStringLocalizer<TranslationDictionary> Localizer

<MudBreakpointProvider OnBreakpointChanged="OnBreakpointChanged"/>

<PermissionView>
    <Authorized Context="AuthenticationState">
        <MudContainer Class="pa-0"
                      MaxWidth="MaxWidth.Large"
                      Style="height: 100%; width: 100%;">
            <MudLayout Style="height: 100%; width: 100%;">
                <MudAppBar Class="pt-4"
                           Elevation="0"
                           Fixed="false">
                    <MudStack AlignItems="AlignItems.Center"
                              Row="true"
                              Spacing="4">
                        <MudImage Alt="brand logo"
                                  ObjectFit="ObjectFit.ScaleDown"
                                  ObjectPosition="ObjectPosition.Center"
                                  Src="icons/brand-logo.svg"
                                  Width="34">
                        </MudImage>
                        <MudText Inline="true"
                                 Typo="Typo.h2">
                            @Localizer[Translations.Common.AppName]
                        </MudText>
                    </MudStack>
                    <MudSpacer/>
                    <MudIconButton Icon="@Icons.Material.Rounded.Search"/>
                    <Avatar User="AuthenticationState.User"/>
                    <LocaleSelector/>
                </MudAppBar>
                @if (_isDesktop)
                {
                    <DesktopNavigation/>
                }
                else
                {
                    <MobileNavigation/>
                }
                <MudMainContent Class="@_contentClass"
                                Style="height:fit-content; width: 100%;">
                    <MudContainer MaxWidth="@_contentWidth"
                                  Style="@_contentStyle">
                        @Body
                    </MudContainer>
                </MudMainContent>
            </MudLayout>
        </MudContainer>
    </Authorized>
</PermissionView>

@code {
    private bool _isDesktop;
    private bool _isAuthenticated;
    private string _contentStyle => _isDesktop ? "padding-left: 300px;" : "padding-bottom: 120px;";
    private string _contentClass => _isDesktop ? "pa-8" : "px-4 py-8";
    private MaxWidth _contentWidth => _isDesktop ? MaxWidth.Medium : MaxWidth.False;

    [Parameter] public RenderFragment? Body { get; set; }

    private void OnBreakpointChanged(Breakpoint breakpoint)
    {
        switch (breakpoint)
        {
            case Breakpoint.Xs or Breakpoint.Sm or Breakpoint.Md:
            case Breakpoint.SmAndDown or Breakpoint.MdAndDown or Breakpoint.LgAndDown:
            case Breakpoint.SmAndUp:
                _isDesktop = false;
                return;

            default:
                _isDesktop = true;
                return;
        }
    }

}
